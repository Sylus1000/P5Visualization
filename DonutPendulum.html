<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        margin: 0;
        overflow: hidden;
      }
    </style>
    <title>DonutPendulum</title>
  </head>
  <body>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"
      integrity="sha512-N4kV7GkNv7QR7RX9YF/olywyIgIwNvfEe2nZtfyj73HdjCUkAfOBDbcuJ/cTaN04JKRnw1YG1wnUyNKMsNgg3g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script>
      const window_w = window.innerWidth;
      const window_h = window.innerHeight;
      var r1, r2, x1, y1, x2, y2, px2, py2, a1, a2;
      const fps = 60;

      function setup() {
        createCanvas(window_w, window_h);
        frameRate(fps);
        graphics = createGraphics(window_w, window_h);

        if (window_w > window_h) {
          r1 = window_h / 2 / 3;
        } else {
          r1 = window_w / 2 / 3;
          r2 = r1 * 2;
        }
        a1 = PI / 4;
        a2 = PI / 8;
        x2 = 0;
        y2 = 0;
        px2 = 0;
        py2 = 0;
      }

      function draw() {
        background(127);

        image(graphics, 0, 0);

        push();
        translate(width / 2, height / 2);
        x1 = r1 * sin(a1);
        y1 = -r1 * cos(a1);

        px2 = x2;
        py2 = y2;

        x2 = x1 + r2 * sin(a2);
        y2 = y1 - r2 * cos(a2);

        //Line 1
        stroke(0);
        strokeWeight(4);
        line(0, 0, x1, y1);

        //Line 2
        line(x1, y1, x2, y2);

        //Point 1
        fill(0, 255, 0);
        ellipse(x1, y1, 32, 32);

        //Point 2
        ellipse(x2, y2, 32, 32);
        pop();

        if (px2 !== 0 && py2 !== 0) {
          graphics.push();
          graphics.translate(width / 2, height / 2);
          graphics.strokeWeight(2);
          graphics.stroke(random(200, 255), 0, random(127, 159));
          graphics.line(px2, py2, x2, y2);
          graphics.pop();
        }

        a1 += 0.08;
        a2 += 0.3;
      }
    </script>
  </body>
</html>
